clang -Xclang -disable-O0-optnone -S -emit-llvm -g digital-root.c
opt -loop-simplify digital-root.ll -S -o digital-root.ll
opt -mem2reg digital-root.ll -S -o digital-root_mem2reg.ll
llvm-cbe digital-root_mem2reg.ll
SUSAN: print loop:Loop at depth 1 containing: %for.cond<header><exiting>,%for.body,%for.cond2,%for.end,%for.inc9<latch>,%for.body4,%for.inc
    Parallel Loop at depth 2 containing: %for.cond2<header><exiting>,%for.body4,%for.inc<latch>

SUSAN: exit block:
for.end11:                                        ; preds = %for.cond
  br label %if.end19, !dbg !45

SUSAN: print loop:Parallel Loop at depth 2 containing: %for.cond2<header><exiting>,%for.body4,%for.inc<latch>

SUSAN: exit block:
for.end:                                          ; preds = %for.cond2
  br label %for.inc9, !dbg !40

SUSAN: false branch only!!!
if.else:                                          ; preds = %entry
  %tobool12 = icmp ne i64 %x, 0, !dbg !46
  br i1 %tobool12, label %land.lhs.true, label %if.end.splitted2, !dbg !48

SUSAN: print loop:Loop at depth 1 containing: %for.cond<header><exiting>,%for.body,%for.inc<latch>

SUSAN: exit block:
for.end:                                          ; preds = %for.cond
  ret i32 0, !dbg !39

clang -g -O3 digital-root_mem2reg.cbe.c -lm -o digital-root_mem2reg.cbe.exe
digital-root_mem2reg.cbe.c:48:10: warning: incompatible redeclaration of library function 'printf' [-Wincompatible-library-redeclaration]
uint32_t printf(uint8_t*, ...);
         ^
digital-root_mem2reg.cbe.c:48:10: note: 'printf' is a builtin with type 'int (const char *, ...)'
digital-root_mem2reg.cbe.c:49:10: warning: incompatible redeclaration of library function 'memcpy' [-Wincompatible-library-redeclaration]
uint8_t* memcpy(uint8_t*, uint8_t*, uint64_t);
         ^
digital-root_mem2reg.cbe.c:49:10: note: 'memcpy' is a builtin with type 'void *(void *, const void *, unsigned long)'
2 warnings generated.
opt digital-root.ll -o digital-root.bc
llvm-cbe digital-root.bc
SUSAN: print loop:Loop at depth 1 containing: %for.cond<header><exiting>,%for.body,%for.cond2,%for.end,%for.inc9<latch>,%for.body4,%for.inc
    Loop at depth 2 containing: %for.cond2<header><exiting>,%for.body4,%for.inc<latch>

SUSAN: exit block:
for.end11:                                        ; preds = %for.cond
  br label %if.end19, !dbg !54

SUSAN: print loop:Loop at depth 2 containing: %for.cond2<header><exiting>,%for.body4,%for.inc<latch>

SUSAN: exit block:
for.end:                                          ; preds = %for.cond2
  br label %for.inc9, !dbg !47

SUSAN: false branch only!!!
if.else:                                          ; preds = %entry
  %13 = load i64, i64* %x.addr, align 8, !dbg !55
  %tobool12 = icmp ne i64 %13, 0, !dbg !55
  br i1 %tobool12, label %land.lhs.true, label %if.end.splitted2, !dbg !57

SUSAN: print loop:Loop at depth 1 containing: %for.cond<header><exiting>,%for.body,%for.inc<latch>

SUSAN: exit block:
for.end:                                          ; preds = %for.cond
  ret i32 0, !dbg !45

llvm-dis digital-root.bc #just for debugging
clang -g -O3 digital-root.cbe.c -lm -o digital-root.cbe.exe
digital-root.cbe.c:48:10: warning: incompatible redeclaration of library function 'printf' [-Wincompatible-library-redeclaration]
uint32_t printf(uint8_t*, ...);
         ^
digital-root.cbe.c:48:10: note: 'printf' is a builtin with type 'int (const char *, ...)'
digital-root.cbe.c:49:10: warning: incompatible redeclaration of library function 'memcpy' [-Wincompatible-library-redeclaration]
uint8_t* memcpy(uint8_t*, uint8_t*, uint64_t);
         ^
digital-root.cbe.c:49:10: note: 'memcpy' is a builtin with type 'void *(void *, const void *, unsigned long)'
2 warnings generated.
llc -filetype=obj digital-root.ll -o digital-root.o
clang -g -O3 -lm digital-root.o -o digital-root.exe
./digital-root.exe > digital-root.out
./digital-root.cbe.exe > digital-root.cbe.out
make: *** [../Makefile.generic:28: check_correctness] Interrupt
